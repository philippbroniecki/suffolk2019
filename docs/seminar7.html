<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 7 Visualising data | Suffolk 2019</title>
  <meta name="description" content="Chapter 7 Visualising data | Suffolk 2019" />
  <meta name="generator" content="bookdown 0.12 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 7 Visualising data | Suffolk 2019" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 7 Visualising data | Suffolk 2019" />
  
  
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="seminar6.html">
<link rel="next" href="seminar8.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />







<script src="lib/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script src="js/codefolding.js"></script>


<script>
$(document).ready(function () {
  window.initializeCodeFolding();
});
</script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="lib\bootstrap\3.3.7\css\bootstrap.min.css" type="text/css" />
<link rel="stylesheet" href="css\readthedocs.css" type="text/css" />
<link rel="stylesheet" href="css\custom.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>About this course</a></li>
<li class="chapter" data-level="1" data-path="seminar1.html"><a href="seminar1.html"><i class="fa fa-check"></i><b>1</b> Introduction to R and RStudio</a><ul>
<li class="chapter" data-level="1.1" data-path="seminar1.html"><a href="seminar1.html#learning-objectives"><i class="fa fa-check"></i><b>1.1</b> Learning objectives</a><ul>
<li class="chapter" data-level="1.1.1" data-path="seminar1.html"><a href="seminar1.html#what-is-r"><i class="fa fa-check"></i><b>1.1.1</b> What is R?</a></li>
<li class="chapter" data-level="1.1.2" data-path="seminar1.html"><a href="seminar1.html#rstudio"><i class="fa fa-check"></i><b>1.1.2</b> RStudio</a></li>
<li class="chapter" data-level="1.1.3" data-path="seminar1.html"><a href="seminar1.html#console"><i class="fa fa-check"></i><b>1.1.3</b> Console</a></li>
<li class="chapter" data-level="1.1.4" data-path="seminar1.html"><a href="seminar1.html#scripts"><i class="fa fa-check"></i><b>1.1.4</b> Scripts</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="seminar2.html"><a href="seminar2.html"><i class="fa fa-check"></i><b>2</b> R-syntax, data structures and types</a><ul>
<li class="chapter" data-level="2.1" data-path="seminar2.html"><a href="seminar2.html#seminar"><i class="fa fa-check"></i><b>2.1</b> Seminar</a><ul>
<li class="chapter" data-level="2.1.1" data-path="seminar2.html"><a href="seminar2.html#functions"><i class="fa fa-check"></i><b>2.1.1</b> Functions</a></li>
<li class="chapter" data-level="2.1.2" data-path="seminar2.html"><a href="seminar2.html#getting-help"><i class="fa fa-check"></i><b>2.1.2</b> Getting Help</a></li>
<li class="chapter" data-level="2.1.3" data-path="seminar2.html"><a href="seminar2.html#the-assignment-operator"><i class="fa fa-check"></i><b>2.1.3</b> The Assignment Operator</a></li>
<li class="chapter" data-level="2.1.4" data-path="seminar2.html"><a href="seminar2.html#vectors-and-subsetting"><i class="fa fa-check"></i><b>2.1.4</b> Vectors and subsetting</a></li>
<li class="chapter" data-level="2.1.5" data-path="seminar2.html"><a href="seminar2.html#matrices"><i class="fa fa-check"></i><b>2.1.5</b> Matrices</a></li>
<li class="chapter" data-level="2.1.6" data-path="seminar2.html"><a href="seminar2.html#arrays"><i class="fa fa-check"></i><b>2.1.6</b> Arrays</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="seminar3.html"><a href="seminar3.html"><i class="fa fa-check"></i><b>3</b> Data import (from csv, txt, and excel)</a><ul>
<li class="chapter" data-level="3.1" data-path="seminar3.html"><a href="seminar3.html#seminar-1"><i class="fa fa-check"></i><b>3.1</b> Seminar</a><ul>
<li class="chapter" data-level="3.1.1" data-path="seminar3.html"><a href="seminar3.html#setting-up"><i class="fa fa-check"></i><b>3.1.1</b> Setting up</a></li>
<li class="chapter" data-level="3.1.2" data-path="seminar3.html"><a href="seminar3.html#loading-data"><i class="fa fa-check"></i><b>3.1.2</b> Loading data</a></li>
<li class="chapter" data-level="3.1.3" data-path="seminar3.html"><a href="seminar3.html#importing-a-dataset-in-.csv-format"><i class="fa fa-check"></i><b>3.1.3</b> Importing a dataset in <code>.csv</code> format</a></li>
<li class="chapter" data-level="3.1.4" data-path="seminar3.html"><a href="seminar3.html#importing-a-dataset-in-excel-xlsx-format"><i class="fa fa-check"></i><b>3.1.4</b> Importing a dataset in Excel (xlsx) format</a></li>
<li class="chapter" data-level="3.1.5" data-path="seminar3.html"><a href="seminar3.html#importing-a-dataset-in-rdata-format"><i class="fa fa-check"></i><b>3.1.5</b> Importing a dataset in RData format</a></li>
<li class="chapter" data-level="3.1.6" data-path="seminar3.html"><a href="seminar3.html#importing-a-dataset-in-.txt-format."><i class="fa fa-check"></i><b>3.1.6</b> Importing a dataset in .txt format.</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="seminar4.html"><a href="seminar4.html"><i class="fa fa-check"></i><b>4</b> Creating, amending, exporting data frames</a><ul>
<li class="chapter" data-level="4.1" data-path="seminar4.html"><a href="seminar4.html#seminar-2"><i class="fa fa-check"></i><b>4.1</b> Seminar</a><ul>
<li class="chapter" data-level="4.1.1" data-path="seminar4.html"><a href="seminar4.html#creating-data-frames"><i class="fa fa-check"></i><b>4.1.1</b> Creating data frames</a></li>
<li class="chapter" data-level="4.1.2" data-path="seminar4.html"><a href="seminar4.html#working-with-data-frames"><i class="fa fa-check"></i><b>4.1.2</b> Working with data frames</a></li>
<li class="chapter" data-level="4.1.3" data-path="seminar4.html"><a href="seminar4.html#amending-data-frames"><i class="fa fa-check"></i><b>4.1.3</b> Amending data frames</a></li>
<li class="chapter" data-level="4.1.4" data-path="seminar4.html"><a href="seminar4.html#saving-data-frames"><i class="fa fa-check"></i><b>4.1.4</b> Saving data frames</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="seminar5.html"><a href="seminar5.html"><i class="fa fa-check"></i><b>5</b> Type coercion</a><ul>
<li class="chapter" data-level="5.1" data-path="seminar5.html"><a href="seminar5.html#seminar-3"><i class="fa fa-check"></i><b>5.1</b> Seminar</a><ul>
<li class="chapter" data-level="5.1.1" data-path="seminar5.html"><a href="seminar5.html#coerce-a-factor-to-character"><i class="fa fa-check"></i><b>5.1.1</b> Coerce a factor to character</a></li>
<li class="chapter" data-level="5.1.2" data-path="seminar5.html"><a href="seminar5.html#coerce-a-character-variable-into-a-factor-variable"><i class="fa fa-check"></i><b>5.1.2</b> Coerce a character variable into a factor variable</a></li>
<li class="chapter" data-level="5.1.3" data-path="seminar5.html"><a href="seminar5.html#coerce-a-character-variable-into-a-numeric-variable"><i class="fa fa-check"></i><b>5.1.3</b> Coerce a character variable into a numeric variable</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="seminar6.html"><a href="seminar6.html"><i class="fa fa-check"></i><b>6</b> Loops and conditions</a><ul>
<li class="chapter" data-level="6.1" data-path="seminar6.html"><a href="seminar6.html#seminar-4"><i class="fa fa-check"></i><b>6.1</b> Seminar</a><ul>
<li class="chapter" data-level="6.1.1" data-path="seminar6.html"><a href="seminar6.html#for-loops"><i class="fa fa-check"></i><b>6.1.1</b> For loops</a></li>
<li class="chapter" data-level="6.1.2" data-path="seminar6.html"><a href="seminar6.html#conditions"><i class="fa fa-check"></i><b>6.1.2</b> Conditions</a></li>
<li class="chapter" data-level="6.1.3" data-path="seminar6.html"><a href="seminar6.html#the-ifelse-function"><i class="fa fa-check"></i><b>6.1.3</b> The ifelse() function</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="seminar7.html"><a href="seminar7.html"><i class="fa fa-check"></i><b>7</b> Visualising data</a><ul>
<li class="chapter" data-level="7.1" data-path="seminar7.html"><a href="seminar7.html#seminar-5"><i class="fa fa-check"></i><b>7.1</b> Seminar</a><ul>
<li class="chapter" data-level="7.1.1" data-path="seminar7.html"><a href="seminar7.html#plots"><i class="fa fa-check"></i><b>7.1.1</b> Plots</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="seminar8.html"><a href="seminar8.html"><i class="fa fa-check"></i><b>8</b> Correlations and differences in means</a><ul>
<li class="chapter" data-level="8.1" data-path="seminar8.html"><a href="seminar8.html#seminar-6"><i class="fa fa-check"></i><b>8.1</b> Seminar</a><ul>
<li class="chapter" data-level="8.1.1" data-path="seminar8.html"><a href="seminar8.html#sample-variance-and-sample-standard-deviation"><i class="fa fa-check"></i><b>8.1.1</b> Sample Variance and Sample Standard Deviation</a></li>
<li class="chapter" data-level="8.1.2" data-path="seminar8.html"><a href="seminar8.html#t-test-for-the-sample-mean"><i class="fa fa-check"></i><b>8.1.2</b> T test for the sample mean</a></li>
<li class="chapter" data-level="8.1.3" data-path="seminar8.html"><a href="seminar8.html#loading-real-data"><i class="fa fa-check"></i><b>8.1.3</b> Loading real data</a></li>
<li class="chapter" data-level="8.1.4" data-path="seminar8.html"><a href="seminar8.html#t-test-one-sample-hypothesis-test-with-real-data"><i class="fa fa-check"></i><b>8.1.4</b> T-test (one-sample hypothesis test) with real data</a></li>
<li class="chapter" data-level="8.1.5" data-path="seminar8.html"><a href="seminar8.html#t-test-difference-in-means"><i class="fa fa-check"></i><b>8.1.5</b> T-test (difference in means)</a></li>
<li class="chapter" data-level="8.1.6" data-path="seminar8.html"><a href="seminar8.html#relationships-between-continuous-variables"><i class="fa fa-check"></i><b>8.1.6</b> Relationships between continuous variables</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="seminar9.html"><a href="seminar9.html"><i class="fa fa-check"></i><b>9</b> Regression</a><ul>
<li class="chapter" data-level="9.1" data-path="seminar9.html"><a href="seminar9.html#seminar-7"><i class="fa fa-check"></i><b>9.1</b> Seminar</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="seminar10.html"><a href="seminar10.html"><i class="fa fa-check"></i><b>10</b> Prediction and assessing prediction accuracy</a><ul>
<li class="chapter" data-level="10.1" data-path="seminar10.html"><a href="seminar10.html#seminar-8"><i class="fa fa-check"></i><b>10.1</b> Seminar</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Suffolk 2019</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="visualising-data" class="section level1">
<h1><span class="header-section-number">Chapter 7</span> Visualising data</h1>
<div id="seminar-5" class="section level2">
<h2><span class="header-section-number">7.1</span> Seminar</h2>
<p>In this section, we will learn how to visualise data which is an important step towards understanding relationships better.</p>
<p>The non-western foreingers data is about the subjective perception of immigrants from non-western countries. The perception of immigrants from a context that is not similar to the one’s own ,is often used as a proxy for racism. Whether this is a fair measure or not is debatable but let’s examine the data from a survey carried out in Britain.</p>
<p>Let’s check the codebook of our data.</p>
<table>
<thead>
<tr class="header">
<th align="left">Variable</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">IMMBRIT</td>
<td align="left">Out of every 100 people in Britain, how many do you think are immigrants from non-western countries?</td>
</tr>
<tr class="even">
<td align="left">over.estimate</td>
<td align="left">1 if estimate is higher than 10.7%.</td>
</tr>
<tr class="odd">
<td align="left">RSex</td>
<td align="left">1 = male, 2 = female</td>
</tr>
<tr class="even">
<td align="left">RAge</td>
<td align="left">Age of respondent</td>
</tr>
<tr class="odd">
<td align="left">Househld</td>
<td align="left">Number of people living in respondent’s household</td>
</tr>
<tr class="even">
<td align="left">party identification</td>
<td align="left">1 = Conservatives, 2 = Labour, 3 = SNP, 4 = Greens, 5 = Ukip, 6 = BNP, 7 = other</td>
</tr>
<tr class="odd">
<td align="left">paper</td>
<td align="left">Do you normally read any daily morning newspaper 3+ times/week?</td>
</tr>
<tr class="even">
<td align="left">WWWhourspW</td>
<td align="left">How many hours WWW per week?</td>
</tr>
<tr class="odd">
<td align="left">religious</td>
<td align="left">Do you regard yourself as belonging to any particular religion?</td>
</tr>
<tr class="even">
<td align="left">employMonths</td>
<td align="left">How many mnths w. present employer?</td>
</tr>
<tr class="odd">
<td align="left">urban</td>
<td align="left">Population density, 4 categories (highest density is 4, lowest is 1)</td>
</tr>
<tr class="even">
<td align="left">health.good</td>
<td align="left">How is your health in general for someone of your age? (0: bad, 1: fair, 2: fairly good, 3: good)</td>
</tr>
<tr class="odd">
<td align="left">HHInc</td>
<td align="left">Income bands for household, high number = high HH income</td>
</tr>
</tbody>
</table>
<p>Let’s load the dataset.</p>
<div class="sourceCode" id="cb120"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb120-1" title="1">dat1 &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;non_western_immigrants.csv&quot;</span>, <span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span>)</a></code></pre></div>
<p>We can look at the variable names in our data with the <a href="http://bit.ly/R_names"><code>names()</code></a> function.</p>
<p>The <a href="http://bit.ly/R_dim"><code>dim()</code></a> function can be used to find out the dimensions of the dataset (dimension 1 = rows, dimension 2 = columns).</p>
<div class="sourceCode" id="cb121"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb121-1" title="1"><span class="kw">dim</span>(dat1)</a></code></pre></div>
<pre><code>[1] 1049   13</code></pre>
<p>So, the <a href="http://bit.ly/R_dim"><code>dim()</code></a> function tells us that we have data from 1049 respondents with 13 variables for each respondent.</p>
<p>Let’s take a quick peek at the first 10 observations to see what the dataset looks like. By default the <a href="http://bit.ly/R_head"><code>head()</code></a> function returns the first 6 rows, but let’s tell it to return the first 10 rows instead.</p>
<div class="sourceCode" id="cb123"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb123-1" title="1"><span class="kw">head</span>(dat1, <span class="dt">n =</span> <span class="dv">10</span>)</a></code></pre></div>
<pre><code>   IMMBRIT over.estimate RSex RAge Househld paper WWWhourspW religious
1        1             0    1   50        2     0          1         0
2       50             1    2   18        3     0          4         0
3       50             1    2   60        1     0          1         0
4       15             1    2   77        2     1          2         1
5       20             1    2   67        1     0          1         1
6       30             1    1   30        4     1         14         0
7       60             1    2   56        2     0          5         1
8        7             0    1   49        1     1          8         0
9       30             1    1   40        4     0          3         1
10       2             0    1   61        3     1          0         1
   employMonths urban health.good HHInc party_self
1            72     4           1    13          2
2            72     4           2     3          7
3           456     3           3     9          7
4            72     1           3     8          7
5            72     3           3     9          7
6            72     1           2     9          7
7           180     1           2    13          3
8           156     4           2    14          7
9           264     2           2    11          3
10           72     1           3     8          1</code></pre>
<p>Finally, let’s look at summary statistics of our dataset.</p>
<div class="sourceCode" id="cb125"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb125-1" title="1"><span class="kw">summary</span>(dat1)</a></code></pre></div>
<pre><code>    IMMBRIT       over.estimate         RSex            RAge      
 Min.   :  0.00   Min.   :0.0000   Min.   :1.000   Min.   :17.00  
 1st Qu.: 10.00   1st Qu.:0.0000   1st Qu.:1.000   1st Qu.:36.00  
 Median : 25.00   Median :1.0000   Median :2.000   Median :49.00  
 Mean   : 29.03   Mean   :0.7235   Mean   :1.544   Mean   :49.75  
 3rd Qu.: 40.00   3rd Qu.:1.0000   3rd Qu.:2.000   3rd Qu.:62.00  
 Max.   :100.00   Max.   :1.0000   Max.   :2.000   Max.   :99.00  
    Househld         paper          WWWhourspW        religious     
 Min.   :1.000   Min.   :0.0000   Min.   :  0.000   Min.   :0.0000  
 1st Qu.:1.000   1st Qu.:0.0000   1st Qu.:  0.000   1st Qu.:0.0000  
 Median :2.000   Median :0.0000   Median :  2.000   Median :0.0000  
 Mean   :2.392   Mean   :0.4538   Mean   :  5.251   Mean   :0.4929  
 3rd Qu.:3.000   3rd Qu.:1.0000   3rd Qu.:  7.000   3rd Qu.:1.0000  
 Max.   :8.000   Max.   :1.0000   Max.   :100.000   Max.   :1.0000  
  employMonths        urban        health.good        HHInc       
 Min.   :  1.00   Min.   :1.000   Min.   :0.000   Min.   : 1.000  
 1st Qu.: 72.00   1st Qu.:2.000   1st Qu.:2.000   1st Qu.: 6.000  
 Median : 72.00   Median :3.000   Median :2.000   Median : 9.000  
 Mean   : 86.56   Mean   :2.568   Mean   :2.044   Mean   : 9.586  
 3rd Qu.: 72.00   3rd Qu.:3.000   3rd Qu.:3.000   3rd Qu.:13.000  
 Max.   :600.00   Max.   :4.000   Max.   :3.000   Max.   :17.000  
   party_self   
 Min.   :1.000  
 1st Qu.:1.000  
 Median :2.000  
 Mean   :3.825  
 3rd Qu.:7.000  
 Max.   :7.000  </code></pre>
<div id="plots" class="section level3">
<h3><span class="header-section-number">7.1.1</span> Plots</h3>
<p>We can visualize the data with the help of a boxplot, so let’s see how the perception of the number of immigrants is distributed.</p>
<div class="sourceCode" id="cb127"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb127-1" title="1"><span class="co"># how good are we at guessing immigration</span></a>
<a class="sourceLine" id="cb127-2" title="2"><span class="kw">boxplot</span>(</a>
<a class="sourceLine" id="cb127-3" title="3">  dat1<span class="op">$</span>IMMBRIT, </a>
<a class="sourceLine" id="cb127-4" title="4">  <span class="dt">main =</span> <span class="st">&quot;Perception of Immigration from Non-Western Countries&quot;</span>,</a>
<a class="sourceLine" id="cb127-5" title="5">  <span class="dt">ylab =</span> <span class="st">&quot;Subjective number of immigrants per 100 British&quot;</span>, </a>
<a class="sourceLine" id="cb127-6" title="6">  <span class="dt">frame.plot =</span> <span class="ot">FALSE</span>, <span class="dt">col =</span> <span class="st">&quot;darkgray&quot;</span></a>
<a class="sourceLine" id="cb127-7" title="7">  )</a></code></pre></div>
<p><img src="suffolk2019_files/figure-html/unnamed-chunk-87-1.png" width="672" /></p>
<p>Notice how the lower whisker is much shorter than the upper one. The distribution is right skewed. The right tail (higher values) is a lot longer. We can see this beter using a density plot. We combine R’s <code>denisty()</code> function with the <code>plot()</code> function.</p>
<div class="sourceCode" id="cb128"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb128-1" title="1"><span class="kw">plot</span>(</a>
<a class="sourceLine" id="cb128-2" title="2">  <span class="kw">density</span>(dat1<span class="op">$</span>IMMBRIT),</a>
<a class="sourceLine" id="cb128-3" title="3">  <span class="dt">bty =</span> <span class="st">&quot;n&quot;</span>,</a>
<a class="sourceLine" id="cb128-4" title="4">  <span class="dt">lwd =</span> <span class="fl">1.5</span>,</a>
<a class="sourceLine" id="cb128-5" title="5">  <span class="dt">main =</span> <span class="st">&quot;Perception of Immigration from Non-Western Countries&quot;</span>,</a>
<a class="sourceLine" id="cb128-6" title="6">  <span class="dt">xlab =</span> <span class="st">&quot;Subjective number of immigrants per 100 British&quot;</span></a>
<a class="sourceLine" id="cb128-7" title="7">  )</a></code></pre></div>
<p><img src="suffolk2019_files/figure-html/unnamed-chunk-88-1.png" width="672" /></p>
<p>We can also plot histograms using the <code>hist()</code> function.</p>
<div class="sourceCode" id="cb129"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb129-1" title="1"><span class="co"># histogram</span></a>
<a class="sourceLine" id="cb129-2" title="2"><span class="kw">hist</span>( dat1<span class="op">$</span>employMonths, <span class="dt">main =</span> <span class="st">&quot;histogram&quot;</span>, <span class="dt">col =</span> <span class="st">&quot;darkgray&quot;</span>)</a></code></pre></div>
<p><img src="suffolk2019_files/figure-html/unnamed-chunk-89-1.png" width="672" /></p>
<p>It is plausible that perception of immigration from Non-Western countries is related to party affiliation. In our dataset, we have a some party affiliation dummies (binary variables). We can use square brackets to subset our data such that we produce a boxplot only for members of the Conservative Party. We first create the binary variables <em>Cons</em> and <em>Lab</em> for (Conservatives and Labour respectively) using the <code>ifelse()</code> function.</p>
<div class="sourceCode" id="cb130"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb130-1" title="1">dat1<span class="op">$</span>Cons &lt;-<span class="st"> </span><span class="kw">ifelse</span>(dat1<span class="op">$</span>party_self <span class="op">==</span><span class="st"> </span><span class="dv">1</span>, <span class="dt">yes =</span> <span class="dv">1</span>, <span class="dt">no =</span> <span class="dv">0</span>)</a>
<a class="sourceLine" id="cb130-2" title="2">dat1<span class="op">$</span>Lab &lt;-<span class="st"> </span><span class="kw">ifelse</span>(dat1<span class="op">$</span>party_self <span class="op">==</span><span class="st"> </span><span class="dv">2</span>, <span class="dt">yes =</span> <span class="dv">1</span>, <span class="dt">no =</span> <span class="dv">0</span>)</a></code></pre></div>
<p>We have a look at the variable <em>Cons</em> using the <code>table()</code> function first.</p>
<div class="sourceCode" id="cb131"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb131-1" title="1"><span class="kw">table</span>(dat1<span class="op">$</span>Cons)</a></code></pre></div>
<pre><code>
  0   1 
765 284 </code></pre>
<p>In our data, 284 respondents associate with the Conservative party and 765 do not. We create a boxplot of <em>IMMBRIT</em> but only for members of the Conservative Party. We do so by using the square brackets to subset our data.</p>
<div class="sourceCode" id="cb133"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb133-1" title="1"><span class="co"># boxplot of immbrit for those observations where Cons is 1</span></a>
<a class="sourceLine" id="cb133-2" title="2"><span class="kw">boxplot</span>(</a>
<a class="sourceLine" id="cb133-3" title="3">  dat1<span class="op">$</span>IMMBRIT[dat1<span class="op">$</span>Cons<span class="op">==</span><span class="dv">1</span>],</a>
<a class="sourceLine" id="cb133-4" title="4">  <span class="dt">frame.plot =</span> <span class="ot">FALSE</span>,</a>
<a class="sourceLine" id="cb133-5" title="5">  <span class="dt">xlab =</span> <span class="st">&quot;Conservatives&quot;</span>,</a>
<a class="sourceLine" id="cb133-6" title="6">  <span class="dt">col =</span> <span class="st">&quot;blue&quot;</span></a>
<a class="sourceLine" id="cb133-7" title="7">  )</a></code></pre></div>
<p><img src="suffolk2019_files/figure-html/unnamed-chunk-92-1.png" width="672" /></p>
<p>We would now like to compare the distribution of the perception fo Conservatives to the distribution among Labour respondents. We can subset the data just like we did for the Conservative Party. In addtion, we want to plot the two plots next to each other, i.e., they should be in the same plot. We can achieve this with the <code>par()</code> function and the <code>mfrow</code> argument. This will spilt the plot window into rows and columns. We want 2 columns to plot 2 boxplots next to each other.</p>
<div class="sourceCode" id="cb134"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb134-1" title="1"><span class="co"># split plot window into 1 row and 2 columns</span></a>
<a class="sourceLine" id="cb134-2" title="2"><span class="kw">par</span>(<span class="dt">mfrow =</span> <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>))</a>
<a class="sourceLine" id="cb134-3" title="3"></a>
<a class="sourceLine" id="cb134-4" title="4"><span class="co"># plot 1</span></a>
<a class="sourceLine" id="cb134-5" title="5"><span class="kw">boxplot</span>(</a>
<a class="sourceLine" id="cb134-6" title="6">  dat1<span class="op">$</span>IMMBRIT[dat1<span class="op">$</span>Cons<span class="op">==</span><span class="dv">1</span>],</a>
<a class="sourceLine" id="cb134-7" title="7">  <span class="dt">frame.plot =</span> <span class="ot">FALSE</span>,</a>
<a class="sourceLine" id="cb134-8" title="8">  <span class="dt">xlab =</span> <span class="st">&quot;Conservatives&quot;</span>,</a>
<a class="sourceLine" id="cb134-9" title="9">  <span class="dt">col =</span> <span class="st">&quot;blue&quot;</span></a>
<a class="sourceLine" id="cb134-10" title="10">  )</a>
<a class="sourceLine" id="cb134-11" title="11"></a>
<a class="sourceLine" id="cb134-12" title="12"><span class="co"># plot 2</span></a>
<a class="sourceLine" id="cb134-13" title="13"><span class="kw">boxplot</span>(</a>
<a class="sourceLine" id="cb134-14" title="14">  dat1<span class="op">$</span>IMMBRIT[dat1<span class="op">$</span>Lab<span class="op">==</span><span class="dv">1</span>],</a>
<a class="sourceLine" id="cb134-15" title="15">  <span class="dt">frame.plot =</span> <span class="ot">FALSE</span>,</a>
<a class="sourceLine" id="cb134-16" title="16">  <span class="dt">xlab =</span> <span class="st">&quot;Labour&quot;</span>,</a>
<a class="sourceLine" id="cb134-17" title="17">  <span class="dt">col =</span> <span class="st">&quot;red&quot;</span></a>
<a class="sourceLine" id="cb134-18" title="18">  )</a></code></pre></div>
<p><img src="suffolk2019_files/figure-html/unnamed-chunk-93-1.png" width="672" /></p>
<p>It is very hard to spot differences. The distributions are similar. The median for Labour respondents is larger which mean that the central Labour respondent over-estimates immigration more than the central Conservative respondent.</p>
<p>You can play around with the non-western foreigners data on your own time. We now turn to a dataset that is integrated in R already. It is called <code>longley</code>. Use the <code>help()</code> function to see what this dataset is about.</p>
<div class="sourceCode" id="cb135"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb135-1" title="1"><span class="kw">help</span>(longley)</a></code></pre></div>
<p>Let’s create a scatterplot with the <code>Year</code> variable on the x-axis and <code>Employed</code> on the y-axis.</p>
<div class="sourceCode" id="cb136"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb136-1" title="1"><span class="kw">plot</span>(<span class="dt">x =</span> longley<span class="op">$</span>Year, <span class="co"># x-axis variable</span></a>
<a class="sourceLine" id="cb136-2" title="2">     <span class="dt">y =</span> longley<span class="op">$</span>Employed, <span class="co"># y-axis variable</span></a>
<a class="sourceLine" id="cb136-3" title="3">     <span class="dt">bty =</span> <span class="st">&quot;n&quot;</span> <span class="co"># no box around the plot</span></a>
<a class="sourceLine" id="cb136-4" title="4">     )</a></code></pre></div>
<p><img src="suffolk2019_files/figure-html/unnamed-chunk-96-1.png" width="672" /></p>
<p>To create a line plot instead, we use the same function with one additional argument <code>type = "l"</code>.</p>
<div class="sourceCode" id="cb137"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb137-1" title="1"><span class="kw">plot</span>(longley<span class="op">$</span>Year, longley<span class="op">$</span>Employed, <span class="dt">type =</span> <span class="st">&quot;l&quot;</span>)</a></code></pre></div>
<p><img src="suffolk2019_files/figure-html/unnamed-chunk-97-1.png" width="672" /></p>
<p>Create a plot that includes both points and lines.</p>
<div class="sourceCode" id="cb138"><pre class="sourceCode r collapsible"><code class="sourceCode r"><a class="sourceLine" id="cb138-1" title="1"><span class="kw">plot</span>(longley<span class="op">$</span>Year, longley<span class="op">$</span>Employed, <span class="dt">type =</span> <span class="st">&quot;b&quot;</span>)</a></code></pre></div>
<p><img src="suffolk2019_files/figure-html/unnamed-chunk-98-1.png" width="672" /></p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="seminar6.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="seminar8.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": false,
"twitter": false,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": {}
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"download": ["suffolk2019.pdf"],
"toc": {
"collapse": "section",
"scroll_highlight": true
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
